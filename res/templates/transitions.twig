{% extends "group-frame.twig" %}

{% block content %}
<h2>{{ sport.getTransitionPluralLabel() }}</h2>

<div class="row">
	<div class="col-md-6">
		{{ trans('from')|capitalize }}:
		<select id="from" class="select2">
			<option></option>
			{% for p in positions %}
			<option value="{{ p.getSlug() }}" {% if p.getSlug() == from %}selected{% endif %}>{{ p.getTitle() }}</option>
			{% endfor %}
		</select>
		{% if from %}
		<a href="{{ from_edit_url }}" class="btn btn-default btn-xs" role="button"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
		{% endif %}
		
	</div>
	<div class="col-md-6">
		{{ trans('to')|capitalize }}:
		<select id="to">
			<option></option>
			{% for p in positions %}
			<option value="{{ p.getSlug() }}" {% if p.getSlug() == to %}selected{% endif %}>{{ p.getTitle() }}</option>
			{% endfor %}
		</select>
		{% if to %}
		<a href="{{ to_edit_url }}" class="btn btn-default btn-xs" role="button"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
		{% endif %}
	</div>
</div>
<script>
var from = document.getElementById('from');
var to = document.getElementById('to');

var changeUrl = function() {
	var url = location.protocol + '//' + location.host + location.pathname;
	var qs = [];

	if (from.value != '') {
		qs.push('from=' + from.value);
	}

	if (to.value != '') {
		qs.push('to=' + to.value);
	}

	if (qs.length > 0) {
		url += '?' + qs.join('&');
	}
	
	location.assign(url);
}

from.addEventListener('change', changeUrl, false);
to.addEventListener('change', changeUrl, false);

</script>
<h3>{{ sport.getSkillPluralLabel() }}</h3>
{% if from or to %}
{% import 'skill-listing.twig' as listing %}
{{ listing.simple(skills, _context) }}
{% endif %}

{% endblock %}